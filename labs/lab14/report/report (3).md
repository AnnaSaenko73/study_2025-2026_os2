---
## Front matter
title: "Отчёт по лабораторной работе №14"
subtitle: "Партиции, файловые системы, монтирование"
author: "Анна Саенко"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true
toc-depth: 2
lof: true
lot: true
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
    - spelling=modern
    - babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: IBM Plex Serif
romanfont: IBM Plex Serif
sansfont: IBM Plex Sans
monofont: IBM Plex Mono
mathfont: STIX Two Math
mainfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
romanfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
sansfontoptions: Ligatures=Common,Ligatures=TeX,Scale=MatchLowercase,Scale=0.94
monofontoptions: Scale=MatchLowercase,Scale=0.94,FakeStretch=0.9
mathfontoptions:
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float}
  - \floatplacement{figure}{H}
---

# Цель работы  

Получить навыки создания разделов на диске и файловых систем. Получить навыки монтирования файловых систем.

# Ход выполнения работы  

## Создание разделов MBR с помощью fdisk

Сначала я перешла под суперпользователя с помощью команды `su` и вывела список всех доступных дисков и разделов с помощью команды `fdisk --list`.  
На скриншоте видно, что в системе присутствуют три диска: `/dev/sda`, `/dev/sdb` и `/dev/sdc`.  
Основной диск `/dev/sda` размечен под систему, а дополнительные диски `/dev/sdb` и `/dev/sdc` добавлены для работы.  

![Просмотр списка дисков](Screenshot_1.png){ #fig:001 width=80% }  

Затем я запустила утилиту `fdisk` для диска `/dev/sdb` и ввела команду `m`, чтобы просмотреть справку по доступным операциям.  
В выводе отображены команды для создания, удаления и изменения разделов, а также записи таблицы разделов на диск.  

![Справка по командам fdisk](Screenshot_2.png){ #fig:002 width=80% }  

Я начала разметку диска `/dev/sdb`, выбрав пункт `n` для создания нового раздела.  
Тип раздела оставила основным (`p`), номер — 1, а размер задала 300 МБ, указав `+300M`.  
После этого применила изменения командой `w`.  

![Создание основного раздела](Screenshot_3.png){ #fig:003 width=80% }  

Чтобы убедиться, что раздел создан, я просмотрела таблицу разделов с помощью команды `fdisk -l /dev/sdb`.  
Также проверила содержимое файла `/proc/partitions`.  
После этого обновила таблицу разделов ядра командой `partprobe /dev/sdb`.  

![Проверка созданного раздела](Screenshot_4.png){ #fig:004 width=80% }  

## Создание логических разделов
 
Затем я снова запустила `fdisk /dev/sdb` и выбрала команду `n`, чтобы добавить новый раздел.  
Тип раздела указала как расширенный (`e`), размер — 1.2 ГБ.  

![Создание расширенного раздела](Screenshot_5.png){ #fig:005 width=80% }  

После создания расширенного раздела я добавила в него логический, выбрав `n` и подтвердив номер раздела по умолчанию.  
Размер нового логического раздела также составил 300 МБ.  
Изменения были записаны на диск командой `w`.  

![Создание логического раздела](Screenshot_6.png){ #fig:006 width=80% }  

Я повторно обновила таблицу разделов (`partprobe /dev/sdb`) и проверила содержимое `/proc/partitions`, а затем — детальную информацию о разделе через `fdisk -l /dev/sdb`.  

![Проверка добавленных разделов](Screenshot_7.png){ #fig:007 width=80% }  

## Создание раздела подкачки  

После этого я добавила ещё один логический раздел размером 300 МБ и изменила его тип с `Linux` на `Linux swap / Solaris` (код 82).  
Изменения записала с помощью `w`, а затем обновила таблицу разделов командой `partprobe /dev/sdb`.  

![Создание раздела подкачки](Screenshot_8.png){ #fig:008 width=80% }  

Я снова просмотрела актуальную таблицу разделов через команды `cat /proc/partitions` и `fdisk -l /dev/sdb`.  
На скриншоте видно, что на диске `/dev/sdb` теперь есть три раздела:  
- `/dev/sdb1` — основной, 300 МБ, тип Linux;  
- `/dev/sdb5` — логический, 300 МБ, тип Linux;  
- `/dev/sdb6` — логический, 300 МБ, тип Linux swap.  

![Проверка структуры разделов](Screenshot_9.png){ #fig:009 width=80% }  

Для форматирования раздела подкачки я использовала команду `mkswap /dev/sdb6`.  
Затем активировала его командой `swapon /dev/sdb6` и проверила результат с помощью `free -m`, убедившись, что размер области подкачки составляет 300 МБ.  

![Настройка и активация swap-раздела](Screenshot_10.png){ #fig:010 width=80% }  

##  Создание разделов GPT с помощью gdisk

Сначала я проверила структуру диска `/dev/sdc` с помощью утилиты `gdisk`.  
Вывод показал, что на диске нет существующей таблицы разделов, поэтому была создана новая GPT-разметка.  

![Создание GPT-разметки](Screenshot_11.png){ #fig:011 width=80% }  

Затем я добавила новый раздел, указав его размер 300 МБ и тип `Linux filesystem (8300)`.  
После проверки таблицы командой `p` записала изменения, выбрав `w`.  

![Создание основного раздела на GPT-диске](Screenshot_12.png){ #fig:012 width=80% }  

Для проверки я вывела содержимое файла `/proc/partitions` и снова просмотрела диск `/dev/sdc` через `gdisk -l`.  
На скриншоте видно, что диск размечен корректно и содержит раздел `/dev/sdc1` размером 300 МБ.  

![Проверка структуры GPT-диска](Screenshot_13.png){ #fig:013 width=80% }  

## Форматирование файловой системы XFS

Далее я создала файловую систему XFS на разделе `/dev/sdb1` с помощью команды `mkfs.xfs`.  
После форматирования задала метку файловой системы `xfsdisk` через `xfs_admin`.  

![Создание файловой системы XFS](Screenshot_14.png){ #fig:014 width=80% }  

## Форматирование файловой системы EXT4 

Затем я создала файловую систему EXT4 на разделе `/dev/sdb5` командой `mkfs.ext4`.  
После этого задала метку `ext4disk` и включила параметры `acl` и `user_xattr` при помощи `tune2fs`.  

![Создание файловой системы EXT4](Screenshot_15.png){ #fig:015 width=80% }  

## Ручное монтирование файловых систем  

Создала каталог `/mnt/tmp` и примонтировала в него раздел `/dev/sdb5`.  
Затем убедилась в успешном монтировании, проверив вывод команды `mount | grep mnt`.  
После проверки отмонтировала раздел.  

![Монтирование и проверка EXT4-раздела](Screenshot_16.png){ #fig:016 width=80% }  

## Монтирование разделов с помощью /etc/fstab

Далее я открыла файл `/etc/fstab` и добавила строку с UUID раздела `/dev/sdb1`, чтобы обеспечить его автоматическое монтирование в каталог `/mnt/data`.  

![Редактирование файла /etc/fstab](Screenshot_17.png){ #fig:017 width=80% }  

## Монтирование разделов с помощью /etc/fstab
 
Создала каталог `/mnt/data`, проверила UUID всех разделов командой `blkid` и примонтировала файловые системы согласно обновлённому `/etc/fstab`.  
Затем выполнила команды `mount -a` и `df -h`, чтобы убедиться, что раздел `/dev/sdb1` успешно смонтирован в `/mnt/data` и отображается в списке файловых систем.  

![Проверка монтирования и доступности разделов](Screenshot_18.png){ #fig:018 width=80% }  

## Самостоятельная работа

Я открыла диск `/dev/sdc` в утилите `gdisk`.  
В таблице разделов была обнаружена действительная GPT-разметка, после чего я создала два новых раздела:  
- второй раздел `/dev/sdc2` размером 300 МБ с типом `Linux filesystem`;  
- третий раздел `/dev/sdc3` размером 300 МБ с типом `Linux swap`.  
Изменения были сохранены с помощью команды `w`.  

![Создание разделов на GPT-диске](Screenshot_19.png){ #fig:019 width=80% }  

На разделе `/dev/sdc2` была создана файловая система **ext4**, а затем присвоена метка `ext4disk2` с помощью `tune2fs`.  
Для раздела `/dev/sdc3` была создана область подкачки командой `mkswap`, после чего она была активирована через `swapon`.  

![Создание файловой системы и настройка подкачки](Screenshot_20.png){ #fig:020 width=80% }  

Я открыла файл `/etc/fstab` и добавила записи для автоматического подключения новых разделов при загрузке системы.  
Раздел `/dev/sdc2` монтируется в каталог `/mnt/data-ext`, а раздел `/dev/sdc3` используется как swap.  

![Редактирование файла /etc/fstab](Screenshot_21.png){ #fig:021 width=80% }  

После перезагрузки системы я проверила список смонтированных файловых систем командой `df -h` и объём подкачки с помощью `free -m`.  
Результаты подтвердили корректное монтирование раздела `/mnt/data-ext` и успешное подключение swap-раздела.  

![Проверка монтирования и активации swap](Screenshot_22.png){ #fig:022 width=80% }  

# Контрольные вопросы  

1. **Какой инструмент используется для создания разделов GUID?**  
   Для работы с разделами на дисках с разметкой GUID (GPT) используется утилита `gdisk`.  
   Она предоставляет возможности создания, изменения и удаления разделов в GPT-таблице.  

2. **Какой инструмент применяется для создания разделов MBR?**  
   Для разметки дисков с таблицей разделов MBR используется программа `fdisk`.  
   Она поддерживает создание основных, расширенных и логических разделов.  

3. **Какой файл используется для автоматического монтирования разделов во время загрузки?**  
   Для автоматического монтирования применяется системный файл `/etc/fstab`,  
   в котором перечислены все разделы и параметры их подключения при старте системы.  

4. **Какой вариант монтирования целесообразно выбрать, если необходимо, чтобы файловая система не была автоматически примонтирована во время загрузки?**  
   В файле `/etc/fstab` можно использовать параметр `noauto`,  
   чтобы раздел не монтировался автоматически при запуске системы.  

5. **Какая команда позволяет форматировать раздел с типом 82 с соответствующей файловой системой?**  
   Раздел с типом 82 используется для подкачки (swap).  
   Его форматируют командой `mkswap /dev/имя_раздела`.  

6. **Вы только что добавили несколько разделов для автоматического монтирования при загрузке. Как можно безопасно проверить, будет ли это работать без реальной перезагрузки?**  
   Проверить корректность записей в `/etc/fstab` можно командой `mount -a`,  
   которая пробует примонтировать все разделы, указанные в этом файле.  

7. **Какая файловая система создаётся, если вы используете команду mkfs без какой-либо спецификации файловой системы?**  
   Если не указать тип, по умолчанию создаётся файловая система `ext2`.  

8. **Как форматировать раздел EXT4?**  
   Для создания файловой системы EXT4 используется команда `mkfs.ext4 /dev/имя_раздела`.  

9. **Как найти UUID для всех устройств на компьютере?**  
   Для отображения UUID всех доступных разделов используется команда `blkid`.  
   Она выводит список устройств и их уникальные идентификаторы.  

# Заключение  

В ходе выполнения самостоятельной работы я закрепила навыки по разметке дисков и настройке файловых систем в Linux.  
Были выполнены следующие действия:  
- создание новых разделов на дисках с разметкой MBR и GPT с помощью утилит `fdisk` и `gdisk`;  
- форматирование разделов в различных файловых системах, включая `ext4` и `xfs`;  
- создание и активация разделов подкачки с типом `Linux swap`;  
- монтирование разделов вручную и настройка автоматического монтирования через файл `/etc/fstab`;  
- проверка корректности подключения файловых систем и функционирования swap.  

В процессе работы я научилась различать схемы разметки дисков MBR и GPT, управлять разделами с помощью командных инструментов и правильно настраивать их автоматическое подключение при загрузке системы.  
Полученные знания позволили глубже понять процессы организации файловых систем и управления памятью в Linux.  
