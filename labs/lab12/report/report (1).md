---
## Front matter
title: "Отчёт по лабораторной работе №12"
subtitle: "Настройки сети в Linux"
author: "Анна Саенко"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true
toc-depth: 2
lof: true
lot: true
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
    - spelling=modern
    - babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: IBM Plex Serif
romanfont: IBM Plex Serif
sansfont: IBM Plex Sans
monofont: IBM Plex Mono
mathfont: STIX Two Math
mainfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
romanfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
sansfontoptions: Ligatures=Common,Ligatures=TeX,Scale=MatchLowercase,Scale=0.94
monofontoptions: Scale=MatchLowercase,Scale=0.94,FakeStretch=0.9
mathfontoptions:
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float}
  - \floatplacement{figure}{H}
---

# Цель работы  

Получить навыки настройки сетевых параметров системы.

# Ход выполнения работы  

## Проверка конфигурации сети  

Сначала я получила права администратора, выполнив команду `su`. После успешного входа под пользователем **root** я приступила к анализу сетевых настроек.  

Далее я вывела на экран информацию о сетевых интерфейсах и статистику по передаче пакетов с помощью команды `ip -s link`.  
На скриншоте видно, что активен интерфейс `enp0s3`, который работает в состоянии **UP**, имеет MAC-адрес `08:00:27:c9:fb:06` и показывает статистику по переданным и полученным байтам. Интерфейс `lo` (loopback) предназначен для внутреннего обмена данными в системе.  

![Информация о сетевых интерфейсах и статистике пакетов](Screenshot_1.png){ #fig:001 width=80% }  

Затем я просмотрела таблицу маршрутизации с помощью команды `ip route show`.  
Из вывода видно, что используется шлюз по умолчанию `10.0.2.2`, а подключение осуществляется через интерфейс `enp0s3`. Это означает, что именно через этот интерфейс осуществляется доступ к сети Интернет.  

Командой `ip addr show` я получила информацию о назначенных IP-адресах интерфейсов.  
Для интерфейса `enp0s3` назначен IPv4-адрес **10.0.2.15/24**, что подтверждает его активное сетевое подключение. Также указаны IPv6-адреса и метки времени их действия.  

Для проверки подключения к Интернету я выполнила команду `ping -c 4 8.8.8.8`.  
Все четыре пакета были успешно получены, потерь нет, время отклика составило около 21 мс — это подтверждает исправную работу сетевого соединения.  

![Проверка подключения к Интернету с помощью ping](Screenshot_2.png){ #fig:002 width=80% }  

Далее я добавила дополнительный IP-адрес к интерфейсу `enp0s3`, выполнив команду:  
`ip addr add 10.0.0.10/24 dev enp0s3`  
Повторный вызов `ip addr show` подтвердил успешное добавление нового адреса.  

![Добавление и проверка дополнительного IP-адреса](Screenshot_3.png){ #fig:003 width=80% }  

Для сравнения я вывела информацию об интерфейсах с помощью команды `ifconfig`.  
Результаты совпадают с данными, полученными ранее через утилиту `ip`, что подтверждает корректность настроек сети и отображаемой информации.  

![Вывод информации с помощью ifconfig](Screenshot_4.png){ #fig:004 width=80% }  

Наконец, я выполнила команду `ss -tul`, чтобы просмотреть список всех открытых портов.  
На скриншоте видно, что система прослушивает несколько TCP-портов: `22 (ssh)`, `80 (http)`, `21 (ftp)` и `9090 (websm)`, а также порты UDP для службы `mdns` и `ntp`.  

![Просмотр открытых TCP и UDP портов](Screenshot_5.png){ #fig:005 width=80% }  

## Управление сетевыми подключениями с помощью nmcli  

Сначала я получила права администратора и вывела список существующих сетевых соединений с помощью команды `nmcli connection show`.  
В списке отобразились активные подключения: интерфейс `enp0s3` (Ethernet) и `lo` (loopback).  

Далее я добавила новое Ethernet-соединение с именем **dhcp**, привязав его к интерфейсу `enp0s3`.  
После этого я создала ещё одно соединение **static** с тем же интерфейсом, но со статическим адресом **10.0.0.10/24** и шлюзом **10.0.0.1**.  
Оба подключения были успешно добавлены, что подтверждено выводом команды.  

![Создание соединений dhcp и static](Screenshot_6.png){ #fig:006 width=80% }  

Затем я активировала статическое соединение командой `nmcli connection up static`.  
В выводе видно, что соединение успешно активировано, и интерфейс `enp0s3` получил указанный статический адрес **10.0.0.10/24**.  
Команды `nmcli connection show` и `ip addr` подтверждают, что подключение **static** активно.  

![Активация и проверка статического соединения](Screenshot_7.png){ #fig:007 width=80% }  

После этого я вернулась к подключению по DHCP, выполнив команду `nmcli connection up dhcp`.  
Проверка вывода показала, что интерфейс снова получил адрес динамически — **10.0.2.15/24**.  
Это подтверждает, что переключение между типами соединений работает корректно.  

![Переключение обратно на соединение dhcp](Screenshot_8.png){ #fig:008 width=80% }  

## Изменение параметров соединения с помощью nmcli  

Сначала я отключила автоматическое подключение для профиля **static**, чтобы он не активировался при загрузке системы. Для этого использовалась команда `nmcli connection modify "static" connection.autoconnect no`.  

Далее я добавила DNS-сервер с адресом **10.0.0.10** и затем второй — **8.8.8.8**, применив ключ `+` для добавления, а не замены значения. После этого я изменила IP-адрес статического соединения на **10.0.0.20/24** и добавила дополнительный адрес **10.20.30.40/16**.  

![Изменение параметров соединения с помощью nmcli](Screenshot_9.png){ #fig:009 width=80% }  

После внесённых изменений я активировала соединение командой `nmcli connection up static` и проверила результат.  
Команда `nmcli connection show` показала, что соединение **static** успешно активно, а вывод `ip addr` подтвердил наличие новых IP-адресов и правильное назначение DNS-серверов.  

Затем я открыла утилиту **nmtui** для визуального просмотра настроек.  
В интерфейсе видно, что профиль **static** привязан к адаптеру `enp0s3`, использует статическую конфигурацию IPv4 с двумя IP-адресами (**10.0.0.20/24** и **10.20.30.40/16**), шлюзом **10.0.0.1** и двумя DNS-серверами (**10.0.0.10**, **8.8.8.8**).  

![Просмотр настроек соединения static через nmtui](Screenshot_10.png){ #fig:010 width=80% }  

Для сравнения я открыла настройки DHCP-соединения в nmtui. Здесь метод IPv4 — **Automatic (DHCP)**, без ручного указания IP-адресов или DNS.  

![Просмотр настроек соединения dhcp через nmtui](Screenshot_11.png){ #fig:011 width=80% }  

После этого я посмотрела сетевые параметры через графический интерфейс системы.  
В окне редактирования соединения **static** отображаются те же параметры: ручной режим (Manual), адреса **10.0.0.20/24** и **10.20.30.40/16**, шлюз **10.0.0.1**, DNS **10.0.0.10** и **8.8.8.8**.  

![Проверка параметров static в графическом интерфейсе](Screenshot_12.png){ #fig:012 width=80% }  

В настройках профиля **dhcp** указано, что IP-адрес, шлюз и DNS получаются автоматически, а подключение установлено с адресом **10.0.2.15**.  

![Просмотр параметров dhcp в графическом интерфейсе](Screenshot_14.png){ #fig:013 width=80% }  

В завершение я переключилась обратно на исходное подключение DHCP с помощью команды `nmcli connection up dhcp`.  
Проверка показала успешное восстановление динамической конфигурации, а интерфейс снова получил IP-адрес **10.0.2.15**.

# Контрольные вопросы  

1. **Какая команда отображает только статус соединения, но не IP-адрес?**  
   Для этого используется команда:  
   - `nmcli connection show --active` — она показывает только активные подключения и их состояние, без вывода IP-адресов.  

2. **Какая служба управляет сетью в ОС типа RHEL?**  
   За управление сетевыми подключениями отвечает служба **NetworkManager**.  

3. **Какой файл содержит имя узла (устройства) в ОС типа RHEL?**  
   Имя хоста хранится в файле `/etc/hostname`.  

4. **Какая команда позволяет вам задать имя узла (устройства)?**  
   Имя хоста можно задать командой:  
   - `hostnamectl set-hostname <имя_узла>`  

5. **Какой конфигурационный файл можно изменить для включения разрешения имён для конкретного IP-адреса?**  
   Для этого используется файл `/etc/hosts`, где можно задать соответствие IP-адреса и доменного имени вручную.  

6. **Какая команда показывает текущую конфигурацию маршрутизации?**  
   Текущую таблицу маршрутов можно просмотреть с помощью:  
   - `ip route show`  
   или устаревшей команды  
   - `route -n`  

7. **Как проверить текущий статус службы NetworkManager?**  
   Для проверки используется команда:  
   - `systemctl status NetworkManager`  

8. **Какая команда позволяет вам изменить текущий IP-адрес и шлюз по умолчанию для вашего сетевого соединения?**  
   Это можно сделать при помощи `nmcli`, например:  
   - `nmcli connection modify <имя_соединения> ipv4.addresses <новый_IP/маска>`  
   - `nmcli connection modify <имя_соединения> ipv4.gateway <шлюз>`  
   После изменения необходимо активировать соединение командой `nmcli connection up <имя_соединения>`.  

# Заключение  

В ходе выполнения лабораторной работы я освоила управление сетевыми интерфейсами и настройку подключений в операционной системе Linux.  
Были выполнены следующие действия:  
- просмотр информации о сетевых интерфейсах, маршрутах и IP-адресах с помощью утилит `ip` и `ifconfig`;  
- проверка доступности сети командой `ping`;  
- добавление дополнительных IP-адресов и анализ их отображения в системе;  
- создание и настройка сетевых подключений с помощью `nmcli`;  
- переключение между динамическим (DHCP) и статическим типом соединения;  
- изменение параметров соединений, включая IP-адреса, шлюзы и DNS-серверы;  
- изучение конфигураций сетевых профилей через интерфейсы `nmtui` и графическую оболочку.  

В результате работы я получила практические навыки конфигурирования сети в Linux, научилась управлять соединениями с помощью NetworkManager, а также поняла принципы взаимодействия между системными службами и сетевыми параметрами. Полученные знания позволят уверенно настраивать и диагностировать сетевую инфраструктуру в системах семейства RHEL.  
