---
## Front matter
title: "Отчёт по лабораторной работе №15"
subtitle: "Управление логическими томами"
author: "Анна Саенко"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true
toc-depth: 2
lof: true
lot: true
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
    - spelling=modern
    - babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: IBM Plex Serif
romanfont: IBM Plex Serif
sansfont: IBM Plex Sans
monofont: IBM Plex Mono
mathfont: STIX Two Math
mainfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
romanfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
sansfontoptions: Ligatures=Common,Ligatures=TeX,Scale=MatchLowercase,Scale=0.94
monofontoptions: Scale=MatchLowercase,Scale=0.94,FakeStretch=0.9
mathfontoptions:
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float}
  - \floatplacement{figure}{H}
---

# Цель работы  

Получить навыки управления логическими томами.

# Ход выполнения работы

## Создание физического тома

Сначала был подготовлен диск **/dev/sdb**: создан новый раздел размером 300 МБ, его тип изменён на **LVM (8e)**, после чего изменения были записаны на диск.

![Создание раздела LVM на /dev/sdb](Screenshot_1.png){ #fig:001 width=80% }

После обновления таблицы разделов был создан физический том **/dev/sdb1**, что подтвердилось выводом `pvs`.

## Создание группы томов и логического тома

Создана группа томов **vgdata**, в которую добавлен физический том `/dev/sdb1`. Проверка через `vgs` подтвердила успешное создание группы.

![Создание VG и проверка pvs/vgs](Screenshot_2.png){ #fig:002 width=80% }

Создан логический том **lvdata**, использующий 50% свободного пространства группы томов. Затем на нём создана файловая система ext4 и подготовлен каталог для монтирования.

![Создание LV и файловой системы](Screenshot_3.png){ #fig:003 width=80% }

В файл `/etc/fstab` добавлена запись для автоматического монтирования логического тома в `/mnt/data`.

![Настройка fstab](Screenshot_4.png){ #fig:004 width=80% }

Проверено корректное монтирование файловой системы.

![Проверка монтирования](Screenshot_5.png){ #fig:005 width=80% }

## Расширение группы томов и логического тома

### Создание второго раздела

Создан второй раздел **/dev/sdb2** размером 300 МБ с типом **LVM (8e)**.

![Создание второго LVM-раздела](Screenshot_6.png){ #fig:006 width=80% }

На новом разделе создан физический том и группа томов была расширена. Команда `vgs` показала увеличение доступного пространства.

![Расширение VG и проверка](Screenshot_7.png){ #fig:007 width=80% }

### Увеличение логического тома

Размер логического тома увеличен на 50% оставшегося свободного пространства в группе. Файловая система расширилась автоматически.

![Расширение LV и проверка](Screenshot_8.png){ #fig:008 width=80% }

### Уменьшение логического тома

Размер логического тома был уменьшён на 50 МБ. После этого проверка `lvs` и `df -h` показала успешное применение изменений и обновлённый размер файловой системы.

![Уменьшение LV и проверка](Screenshot_9.png){ #fig:009 width=80% }

## Самостоятельная работа

Для начала был подготовлен диск **/dev/sdc**, на котором создан новый раздел размером 600 МБ и установлен тип **LVM (8e)**. После записи изменений диск стал готов для использования в качестве физического тома.

![Создание LVM-раздела на /dev/sdc](Screenshot_10.png){ #fig:010 width=80% }

Создан физический том **/dev/sdc1**, затем создана группа томов **vggroup**, в которую включён данный PV. После этого был создан логический том **lvgroup** размером 100% доступного пространства группы томов.

На логическом томе создана файловая система **XFS**, затем подготовлена точка монтирования `/mnt/groups`.

![Создание PV, VG и LV, форматирование в XFS](Screenshot_11.png){ #fig:011 width=80% }

Команды `pvs`, `vgs` и `lvs` подтвердили успешное создание физических, групповых и логических томов.

![Проверка состояния томов](Screenshot_12.png){ #fig:012 width=80% }

Для автоматического монтирования была добавлена строка в файл `/etc/fstab`:

![Изменения в fstab](Screenshot_13.png){ #fig:013 width=80% }

После выполнения `mount -a` и проверки вывода `mount | grep mnt` файловая система успешно смонтировалась.

![Проверка монтирования](Screenshot_14.png){ #fig:014 width=80% }

На диске **/dev/sdb** был создан новый раздел `/dev/sdb2` размером 450 МБ с типом **8e**, который затем преобразован в физический том.

![Создание второго LVM-раздела](Screenshot_15.png){ #fig:015 width=80% }

Группа томов **vggroup** была расширена за счёт нового физического тома:


После этого логический том **lvgroup** был увеличен на 100% свободного пространства группы (что превышает требуемые 150 МБ), при этом файловая система XFS была расширена автоматически благодаря ключу `-r`.

![Расширение группы томов и lvgroup](Screenshot_16.png){ #fig:016 width=80% }

Повторные проверки с помощью `pvs`, `vgs`, `lvs` и `df -h` показали обновлённые размеры физических томов, группы и логического тома. В частности:

- файловая система XFS увеличилась автоматически,
- логический том lvgroup расширён,
- точка монтирования `/mnt/groups` показывает обновленный объём.

![Итоговая проверка размеров](Screenshot_17.png){ #fig:017 width=80% }

Выполненные шаги подтверждают, что расширение тома и файловой системы XFS завершилось успешно.



# Контрольные вопросы  

1. **Как определить UID и группы пользователя?**  
   Для этого можно использовать несколько команд:  
   - `id` — выводит UID, GID и список всех групп пользователя;  
   - `id -u` — показывает только UID;  
   - `id -G` — отображает идентификаторы групп;  
   - `groups` — выводит названия групп, в которых состоит пользователь.  

2. **Какой UID у пользователя root?**  
   У суперпользователя `root` всегда UID равен `0`. Проверить это можно командой `id root`.  

3. **В чём различие между `su` и `sudo`?**  
   - `su` (substitute user) полностью переключает с текущего пользователя на другого, чаще всего на root, и открывает его окружение.  
   - `sudo` (superuser do) выполняет отдельные команды от имени администратора или другого пользователя, при этом оставаясь в текущей сессии.  

4. **Где задаются параметры работы `sudo`?**  
   Настройки определяются в конфигурационном файле `/etc/sudoers`.  

5. **Как безопасно редактировать файл `sudoers`?**  
   Для этого применяется команда `visudo`. Она блокирует одновременное редактирование файла и проверяет синтаксис перед сохранением.  

6. **Какая группа предоставляет полный доступ через `sudo`?**  
   В большинстве дистрибутивов Linux это группа `wheel` (в Debian/Ubuntu часто используется группа `sudo`).  

7. **Какие файлы отвечают за параметры новых пользователей?**  
   - `/etc/login.defs` — глобальные параметры (создание домашнего каталога, политика паролей и т.д.);  
   - `/etc/default/useradd` — настройки по умолчанию для команды `useradd`;  
   - `/etc/skel/` — шаблон содержимого домашнего каталога для новых пользователей.  

8. **Где хранится информация о пользователях и группах?**  
   - `/etc/passwd` — содержит сведения о пользователях и их основных группах;  
   - `/etc/shadow` — хранит зашифрованные пароли и параметры их действия;  
   - `/etc/group` — описывает дополнительные группы и список участников.  

9. **Какие команды позволяют управлять сроком действия паролей?**  
   - `passwd` — изменение пароля пользователя;  
   - `chage` — настройка срока действия пароля (минимальный, максимальный срок, дата истечения, предупреждение о смене).  

10. **Можно ли вручную редактировать файл `/etc/group`?**  
    Напрямую вносить изменения в `/etc/group` не рекомендуется, так как это может привести к ошибкам. Корректнее использовать утилиты:  
    - `groupadd` — добавление новой группы;  
    - `groupdel` — удаление группы;  
    - `usermod` — изменение членства пользователей в группах.  

# Заключение  

В ходе выполнения лабораторной работы я научилась администрировать учётные записи пользователей и управлять группами в Linux.  
Были выполнены следующие действия:  
- определение текущего пользователя и вход под root;  
- создание новых пользователей и настройка паролей;  
- изменение системных параметров для автоматического формирования домашнего каталога;  
- редактирование шаблонных файлов в `/etc/skel`;  
- настройка политики паролей с помощью `chage`;  
- создание групп и распределение пользователей между ними.  

В процессе работы я закрепила знания о назначении файлов `/etc/passwd`, `/etc/shadow`, `/etc/group` и `/etc/sudoers`. Полученный опыт показал, как с помощью командной строки можно управлять многопользовательской системой, обеспечивать контроль доступа и повышать её безопасность.  

